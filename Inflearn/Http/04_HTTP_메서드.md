## HTTP 메서드

- **HTTP API를 만들어보쟈**

  - 요규사항: 회원 정보 관리 API를 만들어바

    **API URI 설계**

    - 회원 목록 조회 /read-member-list
    - 회원 조회 /read-member-by-id
    - 회원 등록 /create-member
    - 회원 수정 /update-member
    - 회원 삭제 /delete-member

      > 과연 위 URI 설계는 좋은 설계일까?

      **가장 중요한 것은 "리소스 식별"**

    **그렇다면 리소스는 어떻게 식별하는 것이 좋지?**  
    리소스는 여기서 회원이란 개념 자체이다  
     그러면 어떻게 식별해야 좋을까?

    > 등록, 수정 뭐 조회 이런거 다 배제한다, 회원이라는 리소스만 식별하면 돼!  
    > 회원 리소스를 URI에 매핑

    - 결론적인 설계는 이렇게 짜는것이 좋아  
      리소스 식별, URI 계층 구조 활용 기억하구

      - 회원 목록 조회 /members
      - 회원 조회 /members/{id}
      - 회원 등록 /members/{id}
      - 회원 수정 /members/{id}
      - 회원 삭제 /members/{id}
        > 참고: 계층 구조상 상위를 컬렉션으로 보고 복수 단어(-s, -es) 사용 권장!

      _요기서 문제가 생김, CRUD에 대한 구분을 어떻게 할까? 라는.._  
       **리소스와 행위를 분리하자**  
       가장 중요한 것은 리소스를 식별 하는 것이니까

      - URI는 리소스만 식별
      - 리소스와 해당 리소스를 대상으로 하는 행위를 분리
        - 리소스: 회원
        - 행위: CRUD
      - 리소스는 명사, 행위는 동사
      - 행위(메서드)는 어떻게 구분할까?
        > GET, POST등 쟝

<br>

- **HTTP 메서드 - GET, POST**

  종류

  - GET: 리소스 조회  
    서버에 전달하고픈 데이터는 쿼리스트링(파라미터)를 통해 전달  
    메시지 바디를 사용해 데이터 전달 가능 허나 지원 않는 곳 많대, 권장X
    <br>
  - POST: 요청 데이터 처리, 주로 등록에 사용  
    요청 데이터 처리  
    **메시지 바디를 통해 서버로 요청 데이터 전달**  
    서버는 요청 데이터를 처리  
     메시지 바디를 통해 들어온 데이터를 처리하는 모든 기능을 수행합니다  
    주로 전달된 데이터로 신규 리소스 등록, 프로세스 처리에 사용함덩

    ```javascript
      POST가 요청 데이터를 어떻게 처리한다는 거지?

      // 스펙: POST 메서드는 대상 리소스가 리소스의 고유한 의미 체계에 따라 요청에 포함 된 표현을 처리토록 요청합니다 (구글 변역)

      /*
      1. 새 리소스 생성(등록)
      2. 요청 데이터 처리
      3. 다른 메서드로 처리하기 애매한 경우
        ex) JSON으로 조회 데이터를 넘겨야 하는데, GET을 쓰기 어렵다? 의 경우
        */
    ```

    <br>

  기타 메서드(참고만, 많이 안쓰여 ㅎ)

  - HEAD: GET과 동일, 메시지 제외한 상태줄과 헤더만 반환
  - OPTIONS: 대상 리소스에 대한 통신 가능 옵션(메서드)을 설명(주로 CORS서 사용)
  - CONNECT: 대상 자원으로 식별되는 서버에 대한 터널을 설정
  - TRACE: 대상 리소스에 대한 경로를 따라 메시지 루프백 테스트를 수행

<br>

- **HTTP 메서드 - PUT, PATCH, DELETE**

  - PUT: 리소스를 대체, 해당 리소스가 없으면 생성  
    리소스를 대체  
     리소스 있으면 대체, 없으면 생성  
     수정이 아니야! 덮는 개념임!  
    **클라이언트가 리소스를 식별**  
    클라가 리소스 위치를 알고 URI지정, POST와 다른점이기도 하지  
    <br>
  - PATCH: 리소스 부분 변경
    <br>
  - DELETE: 리소스 삭제
    > _최근 리소스는 Representation 이라는 표기로 바꼈대 참고만 해_

<br>

- **HTTP 메서드의 속성**

  - **안전(Safe Methods)**

    - 호출해도 리소스를 변경하지 않는다.  
      Q. 그래도 계속 호출해서, 로그같은게 쌓여서 장애가 발생하면?  
      A. 안전은 해당 리소스만 고려, 그런거 고려 않아여~

      <br>

  - **멱등(Idempotent Methods)**

    - f(f(x)) = f(x)
    - 한 번 호출이든 두 번이든 몇 번이든 결과가 같다.
    - 멱등 메서드

      - GET
      - PUT
      - DELETE
      - ~~POST~~ : 두 번 호출시 같은 결제가 중복 발생할 여지가 있어서 아니야 이건...

    - 활용

      - 자동 복구 매커니즘
      - 서버가 TIMEOUT 등 정상 응답을 못 준다면, 클라가 같은 요청을 다시 해도 되는가? 가 판단의 근거입니다

        Q. 재요청 중간에 다른 곳에서 리소스를 변경했다?  
        A. 멱등은 외부 요인으로 중간에 리소스 변경되는 것 까지 고려치는 않아!
        <br>

  - **캐시가능(Cacheable Methods)**

    - 응답 결과 리소스를 캐시해서 사용해도 되나?
    - GET, HEAD, POST, PATCH 캐시 가능
    - 실제론 GET, HEAD 정도만 캐시로 사용
      - POST, PATCH는 본문 내용까지 캐시 키로 고려해야한다..만 구현이 쉽지 않아여
        > 실무선 사실상 GET만 ㅇㅇ 캐시 ㅇㅇ
