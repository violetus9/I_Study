<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>let과 closure</title>
</head>

<body>

  <ul>
    <li>javascript</li>
    <li>java</li>
    <li>python</li>
    <li>django</li>
  </ul>

  <script>
    // 새로운 키워드 let, 블럭단위의 스코프가 지원이 됨
    // + 클로저스코프에 대해 보자

    var list = document.querySelectorAll('li'); // li는 nodeList 타입
    for (var i = 0; i < list.length; i++) {
      list[i].addEventListener('click', function () {
        console.log(i + '번째 리스트');
      });
    }

    // 각각의 리스트 찍어보면 4번째 리스트라는 글만 출력된다 >> 클로저문제
    // 콜백이 가진 i값은 밖의 변수를 계속 참조하여 function이 값을 기억한다.
    // i값은 클로저 변수라고 할 수 있다, 이벤트리스너 4개 생성이되며 밖의 i값을 공유하기에 클로저 문제 발생
    // 함수 내부 지역변수를 생성시켜 해결할 수 있으나, let을 사용하면 간단히 해결된다
    // let 선언시 for문의 순회는 블럭단위로 이뤄졌기 때문

    // 해결
    // var list = document.querySelectorAll('li');
    // for (let i = 0; i < list.length; i++) {
    //   list[i].addEventListener('click', function () {
    //     console.log(i + '번째 리스트');
    //   });
    // }

  </script>

</body>

</html>